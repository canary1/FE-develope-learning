<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>开抢倒计时</title>
<style type="text/css">
#div1{
	height:40px;
	width:300px;
	margin:20px auto;
	line-height:40px;
	border:1px solid #fff;
	background:#CCC;
	text-align:center;
	color:#fff;
	font-size:14px;
	font-family:"微软雅黑";
}
#div1 span{
	height:16px;
	width:16px;
	background:#9F0;
	margin:5px;
	padding:5px;
}
</style>
<script type="text/javascript">
window.onload=function(){
	showTime();
	
};
function checkTime(t){
	return t<10?'0'+t:t;	
}
function showTime(){
	var timer=null;
	clearTimeout(timer);//每次开启定时器之前先关闭定时器，防止内存泄漏
	var oDiv=document.getElementById('div1');
	var aSpan=oDiv.getElementsByTagName('span');
	var curTime=new Date();
	var endTime=new Date('2016/10/2,14:10:00');
	var timeLength=parseInt((endTime.getTime()-curTime.getTime())/1000);
	var day=parseInt(timeLength/(60*60*24));//计算剩余天数
	var hour=parseInt(timeLength/(60*60)%24);//计算剩余小时
	var minute=parseInt(timeLength/60%60);//计算剩余分钟
	var second=parseInt(timeLength%60);//计算剩余秒数
	minute=checkTime(minute);
	second=checkTime(second);
	
	if(timeLength<=0){
		oDiv.innerHTML='团购结束';	
		clearTimeout(timer); //此时关闭定时器
	}
	else{
		aSpan[0].innerHTML=day;
		aSpan[1].innerHTML=hour;
		aSpan[2].innerHTML=minute;
		aSpan[3].innerHTML=second;	
	}
	timer=setTimeout(showTime,500);
}
</script>
</head>

<body>
<div id="div1">
距离开抢还有<span>2</span>天<span>8</span>小时<span>45</span>分<span>32</span>秒
</div>
</body>
</html>
